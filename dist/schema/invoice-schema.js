"use strict";const Schema=require("mongoose").Schema;var Invoice=new Schema({inv_id:{type:String,required:!0,index:!0,unique:!0},p_id:{type:String,index:!0},treatments:[{type:String}],doctor:[{type:String}],payment_method:String,payment_id:String,sub_total:Number,discount:Number,grand_total:Number,created_at:{type:Date,default:Date.now}});Invoice.statics.getAll=function(){return this.find({},{_id:0,__v:0}).lean().exec()},Invoice.statics.countAll=function(){return this.countDocuments()},Invoice.statics.findByDoctor=function(a){return this.find({doctor:a},{_id:0,__v:0}).lean().exec()},Invoice.statics.getByInvid=function(a){return this.findOne({inv_id:a},{_id:0,__v:0}).lean().exec()},Invoice.statics.getLatestInvid=function(){return this.find({},{inv_id:1}).sort("-created_at").limit(1).lean().exec()},Invoice.statics.findByPid=function(a){return this.find({p_id:a},{_id:0,__v:0}).lean().exec()},Invoice.statics.findBetweenDate=function(a,b){return this.find({$and:[{invoice_date:{$gte:a}},{invoice_date:{$lte:b}}]},{_id:0,__v:0}).lean().exec()},Invoice.statics.updateDoc=function(a,b){return this.findOneAndUpdate({inv_id:a},{$set:b}).exec()},module.exports=Invoice;